<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASTREL ACADEMY - Archive</title>
    <style>
        :root {
            --bg-color: #08080a;
            --text-gold: #c5a35d;
            --text-dim: #8e8e93;
            --accent-glow: rgba(197, 163, 93, 0.2);
            --card-bg: rgba(20, 22, 28, 0.6);
            --border-style: 1px solid rgba(197, 163, 93, 0.3);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background-color: var(--bg-color);
            color: var(--text-dim);
            font-family: 'Nanum Myeongjo', serif;
            overflow-x: hidden;
            min-height: 100vh;
        }

        #manaCanvas { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 1000; }

        .prologue-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-color);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 5000; transition: opacity 1.5s ease;
        }
        .prologue-content { max-width: 800px; text-align: center; line-height: 2.2; padding: 40px; }
        .prologue-text p {
            font-size: 1.1rem; margin-bottom: 2.5rem; opacity: 0;
            transform: translateY(20px); filter: blur(5px); animation: fadeInReveal 2s forwards;
        }
        .prologue-text p:nth-child(1) { animation-delay: 1s; }
        .prologue-text p:nth-child(2) { animation-delay: 3s; }
        .prologue-text p:nth-child(3) { animation-delay: 5s; }
        .prologue-text p:nth-child(4) { animation-delay: 7s; }
        .prologue-text p:nth-child(5) { animation-delay: 9s; }
        
        @keyframes fadeInReveal { to { opacity: 1; transform: translateY(0); filter: blur(0); } }

        .enter-btn {
            margin-top: 40px; background: transparent; border: 1px solid var(--text-gold);
            color: var(--text-gold); padding: 15px 50px; cursor: pointer; letter-spacing: 5px;
            opacity: 0; animation: fadeInReveal 1.5s forwards 11s; transition: 0.5s;
        }
        .enter-btn:hover { background: var(--text-gold); color: black; box-shadow: 0 0 30px var(--accent-glow); }

        .main-archive { display: none; opacity: 0; padding: 60px 20px; max-width: 1400px; margin: 0 auto; transition: 2s; }
        .archive-header { text-align: center; margin-bottom: 60px; }
        .archive-header h1 { font-size: 3rem; color: var(--text-gold); letter-spacing: 15px; margin-bottom: 10px; }

        .archive-section { margin-bottom: 80px; }
        .section-title { 
            color: var(--text-gold); font-size: 1.5rem; letter-spacing: 3px; 
            border-bottom: 1px solid var(--accent-glow); padding-bottom: 10px; margin-bottom: 30px;
            display: flex; align-items: center; gap: 15px;
        }
        .section-title::before { content: ''; width: 4px; height: 20px; background: var(--text-gold); display: inline-block; }

        .category-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        
        .info-card {
            background: rgba(30, 32, 40, 0.4); border: 1px solid rgba(197, 163, 93, 0.2);
            padding: 30px; position: relative; transition: 0.3s; cursor: pointer;
        }
        .info-card:hover { border-color: var(--text-gold); background: rgba(197, 163, 93, 0.05); }

        .char-card {
            background: var(--card-bg); border: var(--border-style); padding: 25px;
            position: relative; cursor: pointer; transition: 0.4s; overflow: hidden;
        }
        .char-card:hover { transform: translateY(-5px); border-color: var(--text-gold); background: rgba(30, 32, 40, 0.9); }
        .char-card h3 { color: #fff; margin: 10px 0 5px 0; letter-spacing: 1px; }
        .char-card p { font-size: 0.85rem; color: var(--text-gold); opacity: 0.8; }
        .card-num { font-size: 0.7rem; color: var(--text-gold); opacity: 0.5; position: absolute; top: 15px; right: 15px; }

        .modal {
            display: none; position: fixed; z-index: 6000; left: 0; top: 0;
            width: 100%; height: 100%; background: rgba(0,0,0,0.95); backdrop-filter: blur(15px);
            justify-content: center; align-items: center; opacity: 0; transition: 0.4s;
        }
        .modal.show { display: flex; opacity: 1; }
        .modal-content {
            background: #0f1118; border: 1px solid var(--text-gold); width: 90%; max-width: 1100px;
            height: 80vh; position: relative; display: flex; overflow: hidden;
        }
        .modal-body { display: flex; width: 100%; }
        .modal-left { flex: 1; background: #000; display: flex; align-items: center; justify-content: center; border-right: 1px solid rgba(197,163,93,0.2); }
        .modal-left img { max-width: 100%; max-height: 100%; object-fit: contain; }
        .modal-right { flex: 1.2; padding: 40px; overflow-y: auto; display: flex; flex-direction: column; gap: 20px; }
        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; padding: 15px 0; border-top: 1px solid #333; border-bottom: 1px solid #333; }
        .stat-item { text-align: center; }
        .stat-label { font-size: 0.65rem; color: var(--text-gold); display: block; }
        .stat-value { color: #eee; font-size: 0.9rem; font-weight: bold; }
        .close-btn { position: absolute; top: 20px; right: 25px; font-size: 2rem; color: var(--text-gold); cursor: pointer; z-index: 10; }
        .quote-box { border-left: 2px solid var(--text-gold); padding-left: 15px; font-style: italic; color: #fff; margin-top: 10px; }
        
        /* 썸네일 스타일 추가 */
        #thumbStrip { display: flex; gap: 10px; margin-top: 20px; }
        .thumb { width: 60px; height: 60px; object-fit: cover; border: 1px solid #333; cursor: pointer; opacity: 0.5; }
        .thumb.active { border-color: var(--text-gold); opacity: 1; }
    </style>
</head>
<body>

    <canvas id="manaCanvas"></canvas>

    <div class="prologue-overlay" id="prologue">
        <div class="prologue-content">
            <div class="prologue-text">
                <p>이 세계에는 <span class="highlight">몬스터와 던전</span>이 존재한다.<br>재앙은 언제나 예고 없이 찾아온다.</p>
                <p>누군가는 검을 들고, 누군가는 주문을 엮으며,<br>기록과 계산으로 재앙의 속도를 늦춘다.</p>
                <p><span class="highlight">아스트렐 아카데미</span>는<br>던전에 대응할 인력을 양성하는 기관이다.</p>
                <p>아직은— 아무것도 시작되지 않은 것처럼.</p>
                <p>그리고 당신 또한, 이 세계의 어딘가에 있다.</p>
            </div>
            <button class="enter-btn" onclick="startArchive()">ARCHIVE ACCESS</button>
        </div>
    </div>

    <main class="main-archive" id="mainArchive">
        <header class="archive-header">
            <h1>ASTREL</h1>
            <p style="letter-spacing: 5px; font-size: 0.8rem;">ACADEMY ARCHIVE SYSTEM v2.0</p>
        </header>

        <section class="archive-section">
            <h2 class="section-title">DATABASE: WORLD INFO</h2>
            <div class="category-grid">
                <div class="info-card" onclick="alert('세계관 데이터 로딩 중...')"><h3>THE WORLD</h3><p>몬스터와 던전, 그리고 마력의 흐름.</p></div>
                <div class="info-card" onclick="alert('기숙사 정보 로딩 중...')"><h3>DORMITORIES</h3><p>태양의 루멘, 달의 셀레네 등 기숙사 소개.</p></div>
                <div class="info-card" onclick="alert('지리 데이터 로딩 중...')"><h3>GEOGRAPHY</h3><p>아카데미 주변 주요 거점 및 위험 지역.</p></div>
            </div>
        </section>

        <section class="archive-section"><h2 class="section-title">ACADEMY: STUDENTS</h2><div class="category-grid" id="studentGrid"></div></section>
        <section class="archive-section"><h2 class="section-title">ACADEMY: FACULTY</h2><div class="category-grid" id="facultyGrid"></div></section>
        <section class="archive-section"><h2 class="section-title" style="color: #ff4d4d;">EXTERNAL: BELLUNA</h2><div class="category-grid" id="bellunaGrid"></div></section>
    </main>

    <div id="charModal" class="modal" onclick="if(event.target==this) closeModal()">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <div class="modal-body">
                <div class="modal-left">
                    <div style="display:flex; flex-direction:column; align-items:center;">
                        <img id="modalImg" src="">
                        <div id="thumbStrip"></div> </div>
                </div>
                <div class="modal-right">
                    <h2 id="modalName" style="color:var(--text-gold); font-size: 2.5rem;"></h2>
                    <p id="modalFaction" style="color:var(--text-gold); font-weight:bold;"></p> <p id="infoYear" style="color:var(--text-dim); margin-top:-15px;"></p>
                    <div class="stats-grid">
                        <div class="stat-item"><span class="stat-label">학부</span><span id="infoFaculty" class="stat-value"></span></div>
                        <div class="stat-item"><span class="stat-label">속성</span><span id="infoAttr" class="stat-value"></span></div>
                        <div class="stat-item"><span class="stat-label">신장</span><span id="infoHeight" class="stat-value"></span></div>
                        <div class="stat-item"><span class="stat-label">나이</span><span id="infoAge" class="stat-value"></span></div>
                        <div class="stat-item" style="display:none;"><span id="infoWeight"></span></div> </div>
                    <div class="story-box">
                        <h4 style="color:var(--text-gold); margin-bottom:10px;">[ARCHIVE RECORD]</h4>
                        <p id="modalStory" style="line-height: 1.6; font-size: 0.95rem;"></p>
                    </div>
                    <div id="modalQuote" class="quote-box"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const charactersData = {
            '엘리오': {
                name: "엘리오 루멘 ♂️", quote: "음... 아까 한 말, 다시 해줄래? 자느라 못 들었어...",
                age: "20", height: "175cm", weight: "71kg", year: "1학년",
                faction: "아카데미", faculty: "마법학부", attr: "다속성",
                story: "고위 마법 공작 가문 출신. 서적과 실험에 파묻혀 성장한 탓에 현실 회피 성향과 만성 졸음을 달고 삽니다. 황태자 카이렌을 나른하게 뒤따르며 축적한 방대한 학술 지식은 결정적인 순간 침착한 조력자의 힘을 발휘합니다.",
                images: ['https://d394jeh9729epj.cloudfront.net/8DfAkDwViKY-KKKOOUNVOUpV/6c1516ea-a45c-4159-989f-2ce74090f9a9.png']
            },
            '아델': {
                name: "아델 폰 슈타인 ♂️", quote: "불필요한 대화는 생략하지. 결론부터 내놔.",
                age: "20", height: "182cm", weight: "74kg", year: "1학년",
                faction: "아카데미", faculty: "마법학부", attr: "바람",
                story: "재상 가문의 후계자로, 어린 시절부터 카이렌과 교류하며 논리와 분석력을 갈고닦았습니다. 모든 상황을 수치로 판단하며 감정 개입을 극도로 꺼립니다.",
                images: ['https://via.placeholder.com/400x600/1a1a1a/c5a35d?text=ADELE']
            },
            '리나': {
                name: "리나 ♀️", quote: "기사로서 당연한 일을... 앗, 방금 제 검이 헛나간 건 못 본 걸로 해주세요!",
                age: "20", height: "169cm", weight: "57kg", year: "1학년",
                faction: "아카데미", faculty: "기사학부", attr: "물리",
                story: "평민 출신의 입지전적인 모범 기사. 어린 시절부터 실전 훈련을 거치며 동료 보호를 최우선으로 여기는 신념을 가졌습니다.",
                images: ['https://via.placeholder.com/400x600/1a1a1a/c5a35d?text=LINA']
            },
            '라파엘': {
                name: "라파엘 ♂️", quote: "배가 고프면 판단력이 흐려지는 법이야. 자, 이건 내가 아끼는 간식인데.",
                age: "21", height: "178cm", weight: "70kg", year: "2학년",
                faction: "아카데미", faculty: "기사학부", attr: "어둠",
                story: "다정하고 선한 인상으로 학부 내에서 두터운 신뢰를 받는 선배입니다. 식문화에 대해서는 평소의 온화함과 대비되는 엄격한 기준을 고수합니다.",
                images: ['https://via.placeholder.com/400x600/1a1a1a/c5a35d?text=RAPHAEL']
            },
            '리히터': {
                name: "리히터 크로우 ♂️", quote: "...(시선을 피하며)... 저기, 혹시 주머니에 츄르 있어?",
                age: "21", height: "178cm", weight: "70kg", year: "2학년",
                faction: "아카데미", faculty: "마법학부", attr: "어둠",
                story: "어둠 속성 공작 가문 출신. 정보 수집과 후방 교란에 특화되어 있으며, 동물 앞에서는 평소의 음침함이 무색할 정도로 열정적으로 변합니다.",
                images: ['https://via.placeholder.com/400x600/1a1a1a/c5a35d?text=RICHTER']
            },
            '이벨린': {
                name: "이벨린 드 아르노 ♀️", quote: "있지, 저 구름 마시멜로 맛일 것 같지 않아? 내가 가서 떼어줄까?",
                age: "21", height: "165cm", weight: "55kg", year: "2학년",
                faction: "아카데미", faculty: "마법학부", attr: "땅",
                story: "공작 가문의 영애이나 자유로운 환경에서 자라 규칙에 얽매이지 않습니다. 전장 구조를 변칙적으로 붕괴시키는 데 능합니다.",
                images: ['https://via.placeholder.com/400x600/1a1a1a/c5a35d?text=EVELYN']
            },
            '카이렌': {
                name: "카이렌 알테어 솔라리스 ♂️", quote: "너는 내 손바닥 안에서 가장 빛날 때가 아름다워.",
                age: "22", height: "186cm", weight: "75kg", year: "3학년",
                faction: "아카데미", faculty: "기사학부", attr: "화염",
                story: "제국 황태자. 화사한 미소 아래 철저한 효율주의를 숨긴 통제관입니다. 분노할수록 오히려 정중하고 나긋한 말투로 상대를 압박합니다.",
                images: ['https://d394jeh9729epj.cloudfront.net/8DfAkDwViKY-KKKOOUNVOUpV/b3e71d37-2930-4e46-9b57-19e49c7161b3.png']
            },
            '카엘': {
                name: "카엘 로젠 ♂️", quote: "하하! 오늘 내 검술이 좀 눈부셨지? 내 실력에 어울리는 화려한 무대였어.",
                age: "22", height: "185cm", weight: "72kg", year: "3학년",
                faction: "아카데미", faculty: "기사학부", attr: "속도",
                story: "후작 가문의 기민한 쌍검사. 실전 감각이 매우 뛰어나며 주변을 즐겁게 만드는 천부적인 쾌남입니다.",
                images: ['https://via.placeholder.com/400x600/1a1a1a/c5a35d?text=KAEL']
            },
            '요한': {
                name: "요한 크라프트 ♂️", quote: "이론 따윈 던전에서 안 통한다. 몸으로 기억해라.",
                age: "45", height: "190cm", weight: "90kg", year: "전투학 교수",
                faction: "아카데미", faculty: "전투학", attr: "중력/물리",
                story: "수많은 전장을 누빈 베테랑. 감정을 배제한 채 결과와 생존만을 강조하는 무자비한 교육 방식을 고수합니다.",
                images: ['https://via.placeholder.com/400x600/1a1a1a/c5a35d?text=YOHAN']
            },
            '헬레나': {
                name: "헬레나 바이스 ♀️", quote: "후후... 당신의 마력은 참 정직하게 흔들리네요. 조금 더 괴롭혀보고 싶게.",
                age: "36", height: "172cm", weight: "58kg", year: "마법이론 교수",
                faction: "아카데미", faculty: "마법이론", attr: "정신",
                story: "마법 제어와 봉인의 권위자. 학생들을 관찰 대상으로 여기며 정신적인 압박을 가해 성장을 유도합니다.",
                images: ['https://via.placeholder.com/400x600/1a1a1a/c5a35d?text=HELENA']
            },
            '아리시아': {
                name: "아리시아 블랙하트 ♀️", quote: "모든 것이 무너지는 순간의 소리는 참 달콤하죠.",
                age: "30", height: "168cm", weight: "52kg", year: "벨루나 리더",
                faction: "벨루나", faculty: "총괄", attr: "어둠",
                story: "벨루나의 수장. 우아한 귀부인의 태도로 완벽한 전략을 구사하며 상대를 파멸로 이끕니다.",
                images: ['https://via.placeholder.com/400x600/1a1a1a/c5a35d?text=ALICIA']
            },
            '바르칸': {
                name: "바르칸 ♂️", quote: "내 칼날이 아프냐? 네 녀석의 허술한 방어 체계가 더 거슬리는군.",
                age: "23", height: "178cm", weight: "70kg", year: "실행부",
                faction: "벨루나", faculty: "전투", attr: "어둠",
                story: "벨루나의 핵심 공격수. 짧은 은발과 안대가 특징입니다. 전투에는 무자비하지만 정교한 손재주를 가졌습니다.",
                images: ['https://via.placeholder.com/400x600/1a1a1a/c5a35d?text=BARKAN']
            }
        };

        const canvas = document.getElementById('manaCanvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();

        class Particle {
            constructor(x, y) {
                this.x = x; this.y = y;
                this.size = Math.random() * 2 + 0.5;
                this.speedX = Math.random() * 1.5 - 0.75;
                this.speedY = Math.random() * -1.5 - 0.5;
                this.life = 1;
            }
            update() { this.x += this.speedX; this.y += this.speedY; this.life -= 0.01; }
            draw() {
                ctx.fillStyle = `rgba(197, 163, 93, ${this.life})`;
                ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill();
            }
        }

        window.addEventListener('mousemove', e => { for(let i=0; i<3; i++) particles.push(new Particle(e.clientX, e.clientY)); });

        function animate() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            for(let i = particles.length - 1; i >= 0; i--) {
                particles[i].update(); particles[i].draw();
                if(particles[i].life <= 0) particles.splice(i, 1);
            }
            requestAnimationFrame(animate);
        }
        animate();

        function startArchive() {
            const prologue = document.getElementById('prologue');
            prologue.style.opacity = '0';
            setTimeout(() => {
                prologue.style.display = 'none';
                const main = document.getElementById('mainArchive');
                main.style.display = 'block';
                setTimeout(() => main.style.opacity = '1', 50);
            }, 1500);
        }

        function openModal(id) {
            const data = charactersData[id];
            if(!data) return;
            
            document.getElementById('modalName').innerText = data.name;
            document.getElementById('modalFaction').innerText = `[${data.faction}]`;
            document.getElementById('infoFaculty').innerText = data.faculty;
            document.getElementById('infoAttr').innerText = data.attr;
            document.getElementById('infoAge').innerText = data.age;
            document.getElementById('infoHeight').innerText = data.height;
            document.getElementById('infoWeight').innerText = data.weight;
            document.getElementById('infoYear').innerText = data.year;
            document.getElementById('modalStory').innerText = data.story;
            document.getElementById('modalQuote').innerText = `"${data.quote}"`;
            
            const imgEl = document.getElementById('modalImg');
            imgEl.src = data.images[0];
            
            const thumbStrip = document.getElementById('thumbStrip');
            thumbStrip.innerHTML = '';
            data.images.forEach((src, idx) => {
                const t = document.createElement('img');
                t.src = src; t.className = 'thumb' + (idx === 0 ? ' active' : '');
                t.onclick = () => { 
                    imgEl.src = src; 
                    document.querySelectorAll('.thumb').forEach(el => el.classList.remove('active'));
                    t.classList.add('active');
                };
                thumbStrip.appendChild(t);
            });

            const modal = document.getElementById('charModal');
            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('show'), 10);
        }

        function closeModal() {
            const modal = document.getElementById('charModal');
            modal.classList.remove('show');
            setTimeout(() => modal.style.display = 'none', 400);
        }

        function initCards() {
            const grids = {
                student: document.getElementById('studentGrid'),
                faculty: document.getElementById('facultyGrid'),
                belluna: document.getElementById('bellunaGrid')
            };

            for (let key in charactersData) {
                const c = charactersData[key];
                const card = document.createElement('div');
                card.className = 'char-card';
                card.onclick = () => openModal(key);
                card.innerHTML = `
                    <div class="corner tl"></div>
                    <span class="card-num">${c.year}</span>
                    <h3>${c.name}</h3>
                    <p>${c.faculty}</p>
                    <div class="corner br"></div>
                `;

                if (c.faction === "아카데미") {
                    if (c.year.includes("교수")) grids.faculty.appendChild(card);
                    else grids.student.appendChild(card);
                } else {
                    grids.belluna.appendChild(card);
                }
            }
        }
        window.onload = initCards;
    </script>
</body>
</html>
